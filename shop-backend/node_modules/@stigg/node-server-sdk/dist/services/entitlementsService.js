"use strict";
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.EntitlementsService = void 0;
const entitlementsApi_1 = __importDefault(require("../api/entitlements/entitlementsApi"));
const models_1 = require("../models");
const ModelMapper_1 = require("../utils/ModelMapper");
const entitlementDecisionService_1 = require("./entitlementDecisionService");
const lodash_1 = require("lodash");
const dateUtils_1 = require("../utils/dateUtils");
const sdk_1 = require("@stigg/api-client-js/src/generated/sdk");
const CacheMapper_1 = __importDefault(require("../utils/CacheMapper"));
const entitlementsService_utils_1 = require("./entitlementsService.utils");
const featureTypes_1 = require("../utils/featureTypes");
const cachedEntitlement_1 = __importDefault(require("./cache/cachedEntitlement"));
const calculateUsagePeriod_1 = require("./cache/calculateUsagePeriod");
class EntitlementsService {
    constructor(client, loggerService, edgeApiClient, cacheService, entitlementsTimeout) {
        this.loggerService = loggerService;
        this.cacheService = cacheService;
        this.entitlementsTimeout = entitlementsTimeout;
        this.isInitialized = false;
        this.modelMapper = new ModelMapper_1.ModelMapper();
        this.cacheMapper = new CacheMapper_1.default();
        this.entitlementsApi = new entitlementsApi_1.default(client, edgeApiClient, loggerService);
    }
    async getBooleanEntitlement(customerRefId, featureRefId, fallbackEntitlement, resourceId, options) {
        const { entitlement, customerExists } = await this.getCustomerAndEntitlementFromCacheOrRefetch(featureRefId, customerRefId, resourceId, 'getBooleanEntitlement');
        const decision = entitlementDecisionService_1.EntitlementDecisionService.decideEntitlementPolicy(customerExists, entitlement);
        if (entitlement && !(0, featureTypes_1.isBoolean)(entitlement.calculatedEntitlement.feature)) {
            return Object.assign(Object.assign({}, fallbackEntitlement), { accessDeniedReason: sdk_1.AccessDeniedReason.FeatureTypeMismatch });
        }
        if (!entitlement) {
            this.loggerService.log(`No entitlement for boolean feature found`, {
                customerRefId,
                resourceId,
                featureRefId,
                accessDeniedReason: decision.accessDeniedReason,
            });
            return Object.assign(Object.assign({ type: 'BOOLEAN' }, decision), { isFallback: false });
        }
        return this.modelMapper.mapBooleanEntitlement(entitlement, decision);
    }
    async getNumericEntitlement(customerRefId, featureRefId, fallbackEntitlement, resourceId, options) {
        const { entitlement, customerExists } = await this.getCustomerAndEntitlementFromCacheOrRefetch(featureRefId, customerRefId, resourceId, 'getNumericEntitlement');
        const decision = entitlementDecisionService_1.EntitlementDecisionService.decideEntitlementPolicy(customerExists, entitlement);
        if (entitlement && !(0, featureTypes_1.isNumeric)(entitlement.calculatedEntitlement.feature)) {
            return Object.assign(Object.assign({}, fallbackEntitlement), { accessDeniedReason: sdk_1.AccessDeniedReason.FeatureTypeMismatch });
        }
        if (!entitlement) {
            this.loggerService.log(`No entitlement for numeric feature found`, {
                customerRefId,
                resourceId,
                featureRefId,
                accessDeniedReason: decision.accessDeniedReason,
            });
            return Object.assign(Object.assign({ type: 'NUMERIC' }, decision), { isFallback: false, isUnlimited: false });
        }
        return this.modelMapper.mapNumericEntitlement(entitlement, decision);
    }
    async getMeteredEntitlement(customerRefId, featureRefId, fallbackEntitlement, resourceId, options) {
        const requestUsage = options === null || options === void 0 ? void 0 : options.requestedUsage;
        const { entitlement: originalEntitlement, customerExists } = await this.getCustomerAndEntitlementFromCacheOrRefetch(featureRefId, customerRefId, resourceId, 'getMeteredEntitlement');
        const entitlement = this.handleUsagePeriodOver(originalEntitlement);
        const decision = entitlementDecisionService_1.EntitlementDecisionService.decideEntitlementPolicy(customerExists, entitlement, requestUsage);
        if (entitlement && !(0, featureTypes_1.isMetered)(entitlement.calculatedEntitlement.feature)) {
            return Object.assign(Object.assign({}, fallbackEntitlement), { accessDeniedReason: sdk_1.AccessDeniedReason.FeatureTypeMismatch });
        }
        if (!entitlement) {
            this.loggerService.log(`No entitlement for metered feature found`, {
                customerRefId,
                resourceId,
                featureRefId,
                accessDeniedReason: decision.accessDeniedReason,
            });
            return Object.assign(Object.assign({ type: 'METERED' }, decision), { currentUsage: 0, isFallback: false, isUnlimited: false, hasSoftLimit: false, requestedUsage: requestUsage || 0 });
        }
        return this.modelMapper.mapMeteredEntitlement(entitlement, decision, requestUsage);
    }
    async getEnumEntitlement(customerRefId, featureRefId, fallbackEntitlement, resourceId, options) {
        const requestedValues = options === null || options === void 0 ? void 0 : options.requestedValues;
        const { entitlement, customerExists } = await this.getCustomerAndEntitlementFromCacheOrRefetch(featureRefId, customerRefId, resourceId, 'getEnumEntitlement');
        const decision = entitlementDecisionService_1.EntitlementDecisionService.decideEntitlementPolicy(customerExists, entitlement, 0, requestedValues);
        if (entitlement && !(0, featureTypes_1.isEnum)(entitlement.calculatedEntitlement.feature)) {
            return Object.assign(Object.assign({}, fallbackEntitlement), { accessDeniedReason: sdk_1.AccessDeniedReason.FeatureTypeMismatch });
        }
        if (!entitlement) {
            this.loggerService.log(`No entitlement for enum feature found`, {
                customerRefId,
                resourceId,
                featureRefId,
                accessDeniedReason: decision.accessDeniedReason,
            });
            return Object.assign(Object.assign({ type: 'ENUM' }, decision), { isFallback: false, enumValues: [], requestedValues: requestedValues || [] });
        }
        return this.modelMapper.mapEnumEntitlement(entitlement, decision, requestedValues);
    }
    async getEntitlement(customerRefId, featureRefId, fallbackEntitlement, resourceId, requestedUsage, requestedValues) {
        const { entitlement, customerExists } = await this.getCustomerAndEntitlementFromCacheOrRefetch(featureRefId, customerRefId, resourceId, 'getEntitlement');
        const decision = entitlementDecisionService_1.EntitlementDecisionService.decideEntitlementPolicy(customerExists, entitlement, requestedUsage || 0, requestedValues);
        if (!entitlement) {
            this.loggerService.log(`No entitlement for feature found`, {
                customerRefId,
                resourceId,
                featureRefId,
                accessDeniedReason: decision.accessDeniedReason,
            });
            // Return the fallback entitlement as-is without overriding with decision
            // The fallback should contain the desired hasAccess value from user options
            return Object.assign(Object.assign({}, fallbackEntitlement), { isFallback: true });
        }
        return this.modelMapper.mapEntitlement(entitlement, decision, requestedUsage, requestedValues);
    }
    handleUsagePeriodOver(entitlement) {
        const now = new Date();
        const wasPeriodOver = entitlement &&
            (0, featureTypes_1.isMetered)(entitlement.calculatedEntitlement.feature) &&
            entitlement.featureUsage.usagePeriodEnd &&
            entitlement.featureUsage.usagePeriodEnd < now.getTime();
        if (!wasPeriodOver) {
            return entitlement;
        }
        const { calculatedEntitlement, featureUsage } = entitlement;
        const { resetPeriod, usagePeriodAnchor } = featureUsage;
        let usagePeriodStart;
        let usagePeriodEnd;
        // Calculate new usage period
        if (usagePeriodAnchor && resetPeriod) {
            ({ usagePeriodStart, usagePeriodEnd } = (0, calculateUsagePeriod_1.calculateUsagePeriod)(new Date(usagePeriodAnchor), now, resetPeriod));
        }
        return new cachedEntitlement_1.default(calculatedEntitlement, Object.assign(Object.assign({}, featureUsage), { currentUsage: 0, usagePeriodStart: usagePeriodStart === null || usagePeriodStart === void 0 ? void 0 : usagePeriodStart.getTime(), usagePeriodEnd: usagePeriodEnd === null || usagePeriodEnd === void 0 ? void 0 : usagePeriodEnd.getTime() }));
    }
    async getCustomerAndEntitlementFromCacheOrRefetch(featureRefId, customerRefId, resourceId, triggeredBy) {
        var _a;
        const result = await this.cacheService.getCustomerEntitlement(featureRefId, customerRefId, resourceId);
        let { entitlement, customerExists } = result;
        if (result.cacheMiss || !this.isInitialized) {
            const postMissResult = await this.refetchEntitlementsAfterCacheMiss({
                customerId: customerRefId,
                resourceId,
                refetchGlobalCustomer: result.globalCustomerMissing,
                triggeredBy,
            });
            entitlement = ((_a = postMissResult.entitlements) === null || _a === void 0 ? void 0 : _a.get(featureRefId)) || null;
            customerExists = postMissResult.customerExists;
        }
        return { entitlement, customerExists };
    }
    async getCustomerEntitlements(customerRefId, resourceId) {
        const result = await this.cacheService.getCustomerEntitlements(customerRefId, resourceId);
        let { entitlements, customerExists } = result;
        if (result.cacheMiss || !this.isInitialized) {
            ({ entitlements, customerExists } = await this.refetchEntitlementsAfterCacheMiss({
                customerId: customerRefId,
                resourceId,
                refetchGlobalCustomer: result.globalCustomerMissing,
                triggeredBy: 'getCustomerEntitlements',
            }));
        }
        if (!entitlements) {
            return [];
        }
        return Array.from(entitlements.values()).map((value) => {
            const decision = entitlementDecisionService_1.EntitlementDecisionService.decideEntitlementPolicy(customerExists, value);
            return this.modelMapper.mapEntitlement(value, decision);
        });
    }
    async reportUsage(input) {
        const result = await this.entitlementsApi.reportUsage(input);
        if (result.data) {
            await this.updateFeatureUsage(result.data.reportUsage);
        }
        return result;
    }
    async reportUsageBulk(input) {
        const result = await this.entitlementsApi.reportUsageBulk(input);
        if (result.data) {
            for (const measurement of result.data.reportUsageBulk) {
                await this.updateFeatureUsage(measurement);
            }
        }
        return result;
    }
    reportEvent(input) {
        return this.entitlementsApi.reportEvent(input);
    }
    async refetchEntitlementsAfterCacheMiss(params) {
        const { customerId, resourceId, triggeredBy, refetchGlobalCustomer } = params;
        const refetchPromise = this.refetchEntityEntitlementsAfterCacheMiss(params);
        if ((0, lodash_1.isNil)(resourceId) || !refetchGlobalCustomer) {
            return refetchPromise;
        }
        const globalCustomerRefetchPromise = this.refetchEntityEntitlementsAfterCacheMiss({
            customerId,
            resourceId: undefined,
            triggeredBy,
        });
        const [resourceResult] = await Promise.all([refetchPromise, globalCustomerRefetchPromise]);
        return resourceResult;
    }
    async refetchEntitlements({ customerId, resourceId, skipEdge, triggeredBy, }) {
        this.loggerService.log(`Re-fetching entitlements`, {
            customerId,
            resourceId,
            skipEdge,
            triggeredBy,
        });
        const entitlementsResult = await this.entitlementsApi.getEntitlements(customerId, resourceId, skipEdge, this.entitlementsTimeout);
        const entitlements = await this.setEntitlements({
            entitlements: entitlementsResult.data.entitlements,
            customerId,
            resourceId,
        });
        return entitlementsService_utils_1.entitlementsResponseMapper.cacheHit(entitlements);
    }
    async setEntitlementsIfExists(options) {
        const { entitlements } = options, rest = __rest(options, ["entitlements"]);
        if ((0, lodash_1.isNil)(entitlements)) {
            return Promise.resolve(null);
        }
        return this.setEntitlements(Object.assign({ entitlements }, rest));
    }
    async setEntitlements(params) {
        const { entitlements, customerId, resourceId } = params;
        const entitlementsUpdatedAtTimestamp = this.getEntitlementsUpdatedAtTimestamp(params);
        const featureIdToUsageTimestamp = new Map(entitlements
            .filter((entitlement) => {
            var _a, _b;
            return ((_a = entitlement === null || entitlement === void 0 ? void 0 : entitlement.feature) === null || _a === void 0 ? void 0 : _a.meterType) &&
                ((_b = entitlement === null || entitlement === void 0 ? void 0 : entitlement.feature) === null || _b === void 0 ? void 0 : _b.meterType) !== models_1.MeterType.None &&
                (entitlement === null || entitlement === void 0 ? void 0 : entitlement.feature.refId) &&
                entitlement.usageUpdatedAt &&
                (0, dateUtils_1.isValidDate)(entitlement.usageUpdatedAt);
        })
            .map((entitlement) => { var _a; return [((_a = entitlement.feature) === null || _a === void 0 ? void 0 : _a.refId) || '', new Date(entitlement.usageUpdatedAt).getTime()]; }));
        const cachedEntitlements = this.cacheMapper.mapCachedEntitlements(entitlements);
        // optimistically update the cache
        try {
            await this.cacheService.setCustomer(customerId, cachedEntitlements, resourceId, entitlementsUpdatedAtTimestamp.getTime(), featureIdToUsageTimestamp);
        }
        catch (err) {
            this.loggerService.error('Failed to set customer entitlements in cache (soft ignored)', err);
        }
        return cachedEntitlements;
    }
    getEntitlementsUpdatedAtTimestamp({ entitlements, customerId, resourceId, }) {
        if ((0, lodash_1.isEmpty)(entitlements)) {
            // empty entitlements means we don't have a timestamp
            return entitlementsService_utils_1.DATE_IN_FAR_PAST;
        }
        const entitlementsUpdatedAt = entitlements
            .map(({ entitlementUpdatedAt }) => entitlementUpdatedAt)
            .find((entitlementUpdatedAt) => (0, dateUtils_1.isValidDate)(entitlementUpdatedAt));
        if (!entitlementsUpdatedAt) {
            this.loggerService.error(`Failed to find entitlements updated at timestamp for customer`, {
                customerId,
                resourceId,
            });
            return new Date();
        }
        return new Date(entitlementsUpdatedAt);
    }
    async updateFeatureUsage({ featureId, customerId, resourceId, currentUsage, usagePeriodStart, usagePeriodEnd, timestamp, }) {
        var _a, _b;
        if ((0, lodash_1.isNil)(currentUsage)) {
            return;
        }
        const response = await this.cacheService.getCustomerEntitlement(featureId, customerId, resourceId || undefined);
        if (response.cacheMiss) {
            return;
        }
        await this.cacheService.updateFeatureUsage({
            featureId,
            customerId,
            resourceId: resourceId || undefined,
            currentUsage,
            timestamp: new Date(timestamp),
            usagePeriodStart: (_a = (0, dateUtils_1.mapDate)(usagePeriodStart)) === null || _a === void 0 ? void 0 : _a.getTime(),
            usagePeriodEnd: (_b = (0, dateUtils_1.mapDate)(usagePeriodEnd)) === null || _b === void 0 ? void 0 : _b.getTime(),
        });
    }
    async waitForInitialization() {
        await this.cacheService.waitForInitialization();
    }
}
exports.EntitlementsService = EntitlementsService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW50aXRsZW1lbnRzU2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zZXJ2aWNlcy9lbnRpdGxlbWVudHNTZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsMEZBQWtFO0FBR2xFLHNDQWNtQjtBQUNuQixzREFBbUQ7QUFDbkQsNkVBQTBFO0FBRTFFLG1DQUF3QztBQUV4QyxrREFBMEQ7QUFDMUQsZ0VBUWdEO0FBQ2hELHVFQUErQztBQUMvQywyRUFTcUM7QUFDckMsd0RBQWdGO0FBQ2hGLGtGQUEwRDtBQUMxRCx1RUFBb0U7QUFFcEUsTUFBc0IsbUJBQW1CO0lBT3ZDLFlBQ0UsTUFBMkMsRUFDeEIsYUFBNEIsRUFDL0MsYUFBbUMsRUFDaEIsWUFBMEIsRUFDNUIsbUJBQTJCO1FBSHpCLGtCQUFhLEdBQWIsYUFBYSxDQUFlO1FBRTVCLGlCQUFZLEdBQVosWUFBWSxDQUFjO1FBQzVCLHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBUTtRQVBwQyxrQkFBYSxHQUFHLEtBQUssQ0FBQztRQVM5QixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUkseUJBQVcsRUFBRSxDQUFDO1FBQ3JDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxxQkFBVyxFQUFFLENBQUM7UUFDckMsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLHlCQUFlLENBQUMsTUFBTSxFQUFFLGFBQWEsRUFBRSxhQUFhLENBQUMsQ0FBQztJQUNuRixDQUFDO0lBRUQsS0FBSyxDQUFDLHFCQUFxQixDQUN6QixhQUFxQixFQUNyQixZQUFvQixFQUNwQixtQkFBdUMsRUFDdkMsVUFBbUIsRUFDbkIsT0FBbUM7UUFFbkMsTUFBTSxFQUFFLFdBQVcsRUFBRSxjQUFjLEVBQUUsR0FBRyxNQUFNLElBQUksQ0FBQywyQ0FBMkMsQ0FDNUYsWUFBWSxFQUNaLGFBQWEsRUFDYixVQUFVLEVBQ1YsdUJBQXVCLENBQ3hCLENBQUM7UUFFRixNQUFN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