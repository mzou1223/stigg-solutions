"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.entitlementsResponseMapper = exports.doesCustomerExist = exports.DATE_IN_FAR_PAST = void 0;
const lodash_1 = require("lodash");
exports.DATE_IN_FAR_PAST = new Date(0);
// The getEntitlements API returns empty list for both:
//   * customer not found
//   * customer exists but doesn't have any subscriptions.
// So the SDK side can't differentiate between them, and as a
// compromise we consider empty entitlements as customer not found.
const doesCustomerExist = (entitlements) => !(0, lodash_1.isEmpty)(entitlements);
exports.doesCustomerExist = doesCustomerExist;
exports.entitlementsResponseMapper = {
    cacheHit: (entitlements) => ({
        cacheMiss: false,
        entitlements,
        customerExists: (0, exports.doesCustomerExist)(entitlements),
        globalCustomerMissing: false,
    }),
    cacheMiss: (globalCustomerMissing = false) => ({
        cacheMiss: true,
        entitlements: null,
        customerExists: false,
        globalCustomerMissing,
    }),
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW50aXRsZW1lbnRzU2VydmljZS51dGlscy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zZXJ2aWNlcy9lbnRpdGxlbWVudHNTZXJ2aWNlLnV0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLG1DQUFpQztBQW1CcEIsUUFBQSxnQkFBZ0IsR0FBRyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQTJCNUMsdURBQXVEO0FBQ3ZELHlCQUF5QjtBQUN6QiwwREFBMEQ7QUFDMUQsNkRBQTZEO0FBQzdELG1FQUFtRTtBQUM1RCxNQUFNLGlCQUFpQixHQUFHLENBQUMsWUFBNkIsRUFBRSxFQUFFLENBQUMsQ0FBQyxJQUFBLGdCQUFPLEVBQUMsWUFBWSxDQUFDLENBQUM7QUFBOUUsUUFBQSxpQkFBaUIscUJBQTZEO0FBRTlFLFFBQUEsMEJBQTBCLEdBQUc7SUFDeEMsUUFBUSxFQUFFLENBQUMsWUFBNkIsRUFBZ0MsRUFBRSxDQUFDLENBQUM7UUFDMUUsU0FBUyxFQUFFLEtBQUs7UUFDaEIsWUFBWTtRQUNaLGNBQWMsRUFBRSxJQUFBLHlCQUFpQixFQUFDLFlBQVksQ0FBQztRQUMvQyxxQkFBcUIsRUFBRSxLQUFLO0tBQzdCLENBQUM7SUFDRixTQUFTLEVBQUUsQ0FBQyxxQkFBcUIsR0FBRyxLQUFLLEVBQWlDLEVBQUUsQ0FBQyxDQUFDO1FBQzVFLFNBQVMsRUFBRSxJQUFJO1FBQ2YsWUFBWSxFQUFFLElBQUk7UUFDbEIsY0FBYyxFQUFFLEtBQUs7UUFDckIscUJBQXFCO0tBQ3RCLENBQUM7Q0FDSCxDQUFDIn0=